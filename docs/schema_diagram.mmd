%% Mermaid class diagram for connectivity_schema
classDiagram
    class DataSet {
        +id
        +label
        +publication
        +modality
    }
    class DataItem {
        +id
        +label
        +dataset -> DataSet
    }
    class BrainRegion {
        +id
        +label
        +acronym
        +ontology_id
        +parent_region -> BrainRegion
        +child_regions * BrainRegion
    }
    class AlgorithmRun {
        +id
        +algorithm_name
        +algorithm_version
        +parameters_json
        +run_timestamp
        +input_dataset
    }
    class ClusterHierarchy {
        +id
        +label
        +run -> AlgorithmRun
        +root -> Cluster
    }
    class Cluster {
        +id
        +label
        +parent -> Cluster
        +children * Cluster
        +level
        +size
        +score
    }
    class ClusterMembership {
        +item -> DataItem
        +cluster -> Cluster
        +membership_score
        +membership_probability
        +distance
    }
    class ProjectionMeasurementSet {
        +id
        +data_item -> DataItem
        +measurement_type
        +modality
        +target_regions * BrainRegion
        +unit
        +array -> ExternalArray
    }
    class ProjectionMeasurementMatrix {
        +id
        +measurement_type
        +modality
        +region_index * BrainRegion
        +data_item_index * DataItem
        +array -> ExternalArray
        +projection_unit
    }
    class ExternalArray {
        +id
        +path
        +group_path
        +storage_format
    }
    class MeasurementTypeMetadata {
        +id
        +label
        +modality
        +description_text
        +default_unit
    }

    DataItem --> DataSet : dataset
    ProjectionMeasurementSet --> DataItem : data_item
    ProjectionMeasurementSet --> BrainRegion : target_regions
    ProjectionMeasurementSet --> ExternalArray : array
    ProjectionMeasurementMatrix --> ExternalArray : array
    ProjectionMeasurementMatrix --> BrainRegion : region_index
    ProjectionMeasurementMatrix --> DataItem : data_item_index
    ClusterHierarchy --> AlgorithmRun : run
    ClusterHierarchy --> Cluster : clusters
    Cluster --> Cluster : parent/children
    ClusterMembership --> DataItem : item
    ClusterMembership --> Cluster : cluster
    AlgorithmRun --> DataSet : input_dataset
