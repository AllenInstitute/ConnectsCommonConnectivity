id: https://brain-connects.org/ic3-measurement-schema
name: measurement_schema
description: Projection measurement entities and related metadata classes.
imports:
  - base_schema
  - core_schema
  - brain_region_schema

classes:
  ProjectionMeasurementSet:
    description: Set of projection measurement values for one DataItem across multiple BrainRegions for a single measurement type.
    slots:
      - id
      - data_item
      - measurement_type
      - modality
      - values
      - target_regions
      - unit
    slot_usage:
      data_item:
        range: DataItem
        required: true
      measurement_type:
        range: MeasurementType
        required: true
      modality:
        range: Modality
      values:
        multivalued: true
        range: float
        description: Numeric values aligned positionally with target_regions.
      target_regions:
        multivalued: true
        range: BrainRegion
        inlined: false
        description: Ordered list of brain regions corresponding to the values vector.
      unit:
        range: Unit

  ProjectionMeasurementMatrix:
    description: Aggregated projection measurements for a cohort (e.g., all cells) for a single measurement type.
    slots:
      - id
      - measurement_type
      - modality
      - region_index
      - data_item_index
      - values
      - unit
    slot_usage:
      measurement_type:
        range: MeasurementType
      modality:
        range: Modality
      region_index:
        multivalued: true
        range: BrainRegion
        inlined: false
        description: Ordered regions defining columns (or rows) of the matrix.
      data_item_index:
        multivalued: true
        range: DataItem
        inlined: false
        description: Ordered data items defining rows (or columns) of the matrix.
      values:
        multivalued: true
        range: float
        description: Flattened matrix values in row-major order (data_item_index x region_index).
      unit:
        range: Unit

  MeasurementTypeMetadata:
    description: Metadata about a measurement type including modality specificity and description.
    slots:
      - id
      - name
      - modality
      - description_text
      - default_unit
    slot_usage:
      modality:
        range: Modality
      default_unit:
        range: Unit

slots:
  data_item:
    description: The DataItem for which projection measurements are reported.
  measurement_type:
    description: The specific projection measurement type (enum) for this set.
  region_index:
    description: Ordered list of regions indexing a matrix or values vector.
  data_item_index:
    description: Ordered list of data items indexing a matrix.
  values:
    description: Numeric data values; interpretation depends on measurement_type.
  target_regions:
    description: Regions corresponding to each value in a ProjectionMeasurementSet.
  unit:
    description: Unit of measure for the values.
  description_text:
    description: Free-text description for measurement type metadata.
  default_unit:
    description: Default unit recommended for this measurement type.
