id: https://brain-connects.org/ic3-measurement-schema
name: projection_schema
description: Projection measurement entities and related metadata classes.
imports:
  - base_schema
  - core_schema
  - brain_region_schema
  - zarr_schema

classes:
  ProjectionMeasurementMatrix:
    description: Aggregated projection measurements for a cohort (e.g., all cells) for a single measurement type.
      The rows of this matrix could be a set of cells, set of injections.
      The columns will be how those cells/injections distribute themselves across brain regions. 
      This could mean for single cell reconstructions the outputs of axons.
      For rabies injections they could be distribution of input cells.
      For antereograde injections they could be fluorescence intensity of outputs
      For retrograde injections they could be cell body counts of inputs. 
    slots:
      - id
      - description
      - measurement_type
      - modality
      - region_index
      - data_item_index
      - values
      - unit
    slot_usage:
      measurement_type:
        range: ProjectionMeasurementType
      modality:
        range: Modality
      region_index:
        multivalued: true
        range: BrainRegion
        inlined: false
        description: Ordered regions defining columns (or rows) of the matrix.
      data_item_index:
        multivalued: true
        range: DataItem
        inlined: false
        description: Ordered data items defining rows (or columns) of the matrix.
      values:
        range: ZarrArray
        description: Zarr array containing matrix values with shape (data_item_index x region_index).
      unit:
        range: Unit


slots:
  measurement_type:
    description: The specific projection measurement type (enum) for this set.
  region_index:
    description: Ordered list of regions indexing a matrix or values vector.
  data_item_index:
    description: Ordered list of data items indexing a matrix.
  values:
    description: Numeric data values; interpretation depends on measurement_type.
  zarr_array:
    description: Reference to a zarr array containing the matrix data.
  description_text:
    description: Free-text description for measurement type metadata.
  default_unit:
    description: Default unit recommended for this measurement type.
